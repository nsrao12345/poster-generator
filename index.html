<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Celebration Poster Generator</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body {
    font-family: 'Noto Serif Devanagari', serif;
    background: #f2f2f2;
    margin: 0;
    padding: 16px;
}

.container {
    display: flex;
    gap: 20px;
    align-items: flex-start;
}

/* CONTROLS */
.controls {
    width: 320px;
    background: #ffffff;
    padding: 16px;
    border-radius: 10px;
}

.controls input,
.controls textarea,
.controls select,
.controls button {
    width: 100%;
    margin-bottom: 12px;
    padding: 12px;
    font-size: 16px;
}

/* POSTER WRAPPER */
.poster-wrapper {
    padding: 16px;
    border-radius: 18px;
    background: linear-gradient(135deg, #d63a3a, #f4a261);
}

/* POSTER */
.poster {
    width: 380px;
    padding: 16px;
    border: 6px solid #7b3f00;
    background-color: #fff5df;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Ccircle cx='40' cy='40' r='18' fill='%23ff6f61'/%3E%3Ccircle cx='120' cy='30' r='14' fill='%23ffd166'/%3E%3Ccircle cx='80' cy='120' r='16' fill='%236ec6ff'/%3E%3Ccircle cx='160' cy='140' r='12' fill='%2396d38c'/%3E%3Cline x1='40' y1='58' x2='40' y2='90' stroke='%23555'/%3E%3Cline x1='120' y1='44' x2='120' y2='75' stroke='%23555'/%3E%3Cline x1='80' y1='136' x2='80' y2='165' stroke='%23555'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 200px 200px;
}

/* HEADER */
.header {
    text-align: center;
    font-weight: 700;
    color: #7b0000;
    margin-bottom: 10px;
}

.header small {
    display: block;
    font-size: 20px;
    font-weight: 700;
    margin-top: 6px;
}

/* AMOUNT */
.amount {
    text-align: center;
    font-size: 28px;
    font-weight: 700;
    color: #a00000;
    margin: 10px 0;
}

.date {
    text-align: center;
    font-weight: 600;
    margin-bottom: 10px;
}

.content {
    font-size: 15px;
    line-height: 1.6;
    text-align: center;
    background: rgba(255,245,223,0.95);
    padding: 10px;
    border-radius: 8px;
}

.photo {
    margin-top: 16px;
    text-align: center;
}

.photo img {
    width: 180px;
    height: 220px;
    object-fit: cover;
    border: 4px solid #7b3f00;
    border-radius: 12px;
    background: #ffffff;
}

.footer {
    font-size: 13px;
    margin-top: 14px;
    text-align: center;
    color: #5a2a00;
    font-weight: 600;
    background: rgba(255,245,223,0.9);
    padding: 6px;
    border-radius: 6px;
}

button.download {
    background: #7b0000;
    color: #ffffff;
    border: none;
    cursor: pointer;
    font-size: 16px;
    border-radius: 6px;
}

/* MOBILE UX FIX */
@media (max-width: 768px) {

    .container {
        flex-direction: column;
        align-items: stretch;
    }

    .controls {
        width: 100%;
    }

    .poster-wrapper {
        width: 100%;
        display: flex;
        justify-content: center;
        margin-top: 12px;
    }

    .poster {
        width: 100%;
        max-width: 420px;
    }
}
</style>
</head>

<body>

<div class="container">

<div class="controls">

    <select onchange="changeTemplate(this.value)">
        <option value="self">Person contributing on own birthday</option>
        <option value="father">Father contributing for son’s birthday</option>
        <option value="anniversary">Anniversary (Husband & Wife)</option>
        <option value="custom">Custom occasion</option>
    </select>

    <input type="text" id="name1" value="नरेंद्र सिंह" oninput="updateMessage()">
    <input type="text" id="name2" value="वंशराज सिंह" oninput="updateMessage()">

    <input type="text" value="501" oninput="amount.innerText=this.value; updateMessage()">

    <input type="date" value="2026-02-19"
           oninput="date.innerText=this.value.split('-').reverse().join('-')">

    <textarea rows="5" id="messageInput" oninput="message.innerText=this.value"></textarea>

    <input type="file" accept="image/*" onchange="loadPhoto(event)">

    <button class="download" onclick="downloadPoster()">Download Poster</button>
    <button class="download" onclick="shareWhatsApp()">Share on WhatsApp</button>
</div>

<div class="poster-wrapper">
<div class="poster" id="poster">

    <div class="header">
        श्री गणेशाय नमः
        <small>पाटेश्वर युवा सेवा समिति, ठि. पटली</small>
    </div>

    <div class="amount">
        ₹ <span id="amount">501</span>
    </div>

    <div class="date">
        दिनांक: <span id="date">19-02-2026</span>
    </div>

    <div class="content" id="message"></div>

    <div class="photo">
        <img id="photo" src="">
    </div>

    <div class="footer">
        © 2026, Design by NsRao
    </div>

</div>
</div>

</div>

<script>
let currentTemplate = "self";

function changeTemplate(type) {
    currentTemplate = type;
    document.getElementById("name2").style.display =
        (type === "self") ? "none" : "block";
    updateMessage();
}

function updateMessage() {
    const n1 = name1.value;
    const n2 = name2.value;
    const amt = amount.innerText;
    let text = "";

    if (currentTemplate === "self") {
        text = `श्री ${n1} ने अपने जन्मदिन के शुभ अवसर पर पाटेश्वर युवा सेवा समिति, ठि. पटली को ${amt} रुपये का आर्थिक सहयोग प्रदान किया। इस अवसर पर श्री ${n1} को जन्मदिन की हार्दिक बधाई एवं शुभकामनाएं।`;
    }

    if (currentTemplate === "father") {
        text = `श्री ${n1} ने अपने सुपुत्र ${n2} के जन्मदिन के शुभ अवसर पर पाटेश्वर युवा सेवा समिति, ठि. पटली को ${amt} रुपये का आर्थिक सहयोग प्रदान किया। इस अवसर पर ${n2} को जन्मदिन की हार्दिक बधाई एवं शुभकामनाएं।`;
    }

    if (currentTemplate === "anniversary") {
        text = `श्री ${n1} एवं श्रीमती ${n2} ने अपनी वैवाहिक वर्षगांठ के शुभ अवसर पर पाटेश्वर युवा सेवा समिति, ठि. पटली को ${amt} रुपये का आर्थिक सहयोग प्रदान किया। इस अवसर पर दोनों को वैवाहिक वर्षगांठ की हार्दिक बधाई एवं शुभकामनाएं।`;
    }

    if (currentTemplate === "custom") return;

    message.innerText = text;
    messageInput.value = text;
}

function loadPhoto(event) {
    photo.src = URL.createObjectURL(event.target.files[0]);
}

function downloadPoster() {
    html2canvas(document.getElementById("poster")).then(canvas => {
        const link = document.createElement("a");
        link.download = "celebration_poster.png";
        link.href = canvas.toDataURL();
        link.click();
    });
}

/* ✅ WHATSAPP SHARE */
function shareWhatsApp() {
    const poster = document.getElementById("poster");

    html2canvas(poster).then(canvas => {
        canvas.toBlob(blob => {
            const file = new File([blob], "poster.png", { type: "image/png" });

            if (navigator.canShare && navigator.canShare({ files: [file] })) {
                navigator.share({
                    files: [file],
                    title: "Celebration Poster",
                    text: "Sharing celebration poster"
                });
            } else {
                alert("Direct WhatsApp share is not supported on this device. Please download and share manually.");
            }
        });
    });
}

changeTemplate("self");
</script>

</body>
</html>
